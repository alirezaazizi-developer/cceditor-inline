<!doctype html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./page.css">
    <link rel="stylesheet" href="./editor.css">
    <link rel="stylesheet" href="./fontello/css/animation.css">
</head>
<body>
<div id="main" contenteditable="true">
    hello this is a simple javascript text editor for use easy and
</div>
<button id="data">selection</button>
<!--<div id="btn">-->
<!--    <div id="edit">-->
<!--        <button id="editable"><i class="demo-icon icon-align-justify"></i>ุง</button>-->
<!--    </div>-->
<!--</div>-->
<!--<script src="./vue.js"></script>-->
<!--<script src="./editor.js"></script>-->
<script>

    document.getElementById("data").addEventListener("click", function () {




        let selection = window.getSelection().getRangeAt(0);
        let selectedText = selection.extractContents();
        let span = document.createElement("b");
        // span.classList.add('h');
        console.log(selectedText.textContent);

        if (document.getElementById("main").contentEditable === "true"){
            let main = document.getElementById("main").innerText;
            console.log(main);
            console.log(main.match("/"+selectedText.textContent+"/g"));
            // if (main.match("")){
            //     console.log("is right");
            // }else{
            //     console.log("is false");
            // }
        }else{
            console.log("please change to content editable ");
        }
        /**/
        span.innerHTML = selectedText.textContent;
        console.log(span);
        selection.insertNode(span);
        if (selectedText.childNodes[1] !== undefined) {
            console.log(selectedText.childNodes[1]);
            $(selectedText.childNodes[1]).remove();
        }
        let txt = document.getElementById("Text").innerHTML = '';
        document.getElementById("Text").innerHTML = txt.replace(/<\/span>(?:\s)*<span class="highlight">/g, '');
        clearSelection();


        function clearSelection() {
            if (document.selection) {
                document.selection.empty();
            } else if (window.getSelection) {
                window.getSelection().removeAllRanges();
            }
        }

    })
    ;
</script>
</body>
</html>


