<!doctype html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./page.css">
    <link rel="stylesheet" href="./editor.css">
    <link rel="stylesheet" href="./fontello/css/animation.css">
</head>
<body>
<div id="main" contenteditable="true">
    hello this is a simple javascript text editor for use easy and
</div>
<button id="data">selection</button>
<!--<div id="btn">-->
<!--    <div id="edit">-->
<!--        <button id="editable"><i class="demo-icon icon-align-justify"></i>ุง</button>-->
<!--    </div>-->
<!--</div>-->
<!--<script src="./vue.js"></script>-->
<!--<script src="./editor.js"></script>-->
<script>

    function main(options) {
        /* at first step get text value in container */
        let main = document.getElementById(options.editable).innerText;
        console.log(main);
        /* this condition when run if dis div content editable is true */
        if (document.getElementById(options.editable).contentEditable === "true") {

            /* second step get value selection */
            let selection = window.getSelection().getRangeAt(0);
            let selectedText = selection.extractContents();
            let span = document.createElement(options.tag);

            /* get text content of window.selected */
            let content = selectedText.textContent;

            /* work with regex to validate user selected text with content editable text */
            let regex = new RegExp(content);
            let resultValidation = regex.test(main);

            /*this condition for check top tip*/
            if (resultValidation === true) {
                /* when result validation variable is true its mine user input is right change user value */
                span.innerHTML = selectedText.textContent;
                console.log(span);
                selection.insertNode(span);
                if (selectedText.childNodes[1] !== undefined) {
                    console.log(selectedText.childNodes[1]);
                    selectedText.childNodes[1].removeChild(selectedText);
                }

            } else {
                console.log("is false");
            }
        } else {
            console.log("please change to content editable ");
        }
    }

    document.getElementById("data").addEventListener("click", function () {
        main({editable:"main" , tag:"i"});
    })
    ;
</script>
</body>
</html>


